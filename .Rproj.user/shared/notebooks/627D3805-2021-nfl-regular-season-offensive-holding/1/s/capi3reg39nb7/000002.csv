"0","year = 2021"
"0","week = 18"
"0",""
"0","nfl_hold_pbp_df <- load_pbp(year) %>%"
"0","  filter(week <= week) %>%"
"0","  filter(grepl(""Offensive Holding"", desc,"
"0","               ignore.case = T) == T) %>%"
"0","  filter(grepl(""punts"", desc) == F) %>%"
"0","  filter(grepl(""kicks"", desc) == F) %>%"
"0","  mutate(season = year) %>%"
"0","  mutate(off_hold_play_type = case_when(rush_attempt == 1 ~ ""Run"","
"0","                                        pass_attempt == 1 ~ ""Pass"","
"0","                                        grepl(""pass"", desc) == T ~ ""Pass"","
"0","                                        grepl(""scrambles"", desc) == T ~ ""Pass"","
"0","                                        grepl(""sacked"", desc) == T ~ ""Pass"","
"0","                                        TRUE ~ ""Run"")) %>%"
"0","  rename(team = posteam,"
"0","         opponent = defteam) %>%"
"0","  select(season, team, week, opponent,"
"0","         desc, off_hold_play_type,"
"0","         rush_attempt, pass_attempt,"
"0","         penalty_player_id, penalty_player_name,"
"0","         series, series_success, series_result) %>%"
"0","  mutate(accept_decline = ifelse(grepl(""Offensive Holding, declined"", desc),"
"0","                                 ""declined"","
"0","                                 ""accepted""))"
"1",""
"0","# Summarize holding penalties committed by each team"
"0","team_off_hold_commit <- nfl_hold_pbp_df %>%"
"0","  group_by(team, off_hold_play_type) %>%"
"0","  summarize(n_holds = n()) %>%"
"0","  ungroup()"
"2","`summarise()` has grouped output by 'team'. You can override using the `.groups` argument.
"
"0","team_off_hold_commit_totals <- team_off_hold_commit %>%"
"0","  group_by(team) %>%"
"0","  summarize(total_holds = sum(n_holds))"
"0","team_off_hold_commit <- left_join(team_off_hold_commit, team_off_hold_commit_totals,"
"0","                               by = c(""team"" = ""team""))"
"0",""
"0","# Summarize holding penalties drawn by each team"
"0","team_off_hold_drawn <- nfl_hold_pbp_df %>%"
"0","  group_by(opponent, off_hold_play_type) %>%"
"0","  summarize(n_holds = n()) %>%"
"0","  ungroup() %>%"
"0","  rename(team = opponent)"
"2","`summarise()` has grouped output by 'opponent'. You can override using the `.groups` argument.
"
"0","team_off_hold_drawn_totals <- team_off_hold_drawn %>%"
"0","  group_by(team) %>%"
"0","  summarize(total_holds = sum(n_holds))"
"0","team_off_hold_drawn <- left_join(team_off_hold_drawn, team_off_hold_drawn_totals,"
"0","                                  by = c(""team"" = ""team""))"
"0",""
"0","# Net offensive hold advantage"
"0","team_net_holds <- team_off_hold_drawn_totals %>%"
"0","  rename(total_holds_drawn = total_holds) %>%"
"0","  left_join(team_off_hold_commit_totals,"
"0","            by = c(""team"" = ""team"")) %>%"
"0","  rename(total_holds_committed = total_holds) %>%"
"0","  mutate(net_holds = total_holds_drawn - total_holds_committed)"
"0",""
